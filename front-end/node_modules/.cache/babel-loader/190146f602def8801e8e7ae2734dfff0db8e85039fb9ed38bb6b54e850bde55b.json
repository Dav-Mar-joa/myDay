{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Line}from'react-chartjs-2';import axios from'axios';import LogoutButton from'./LogoutButton';// Importer le composant LogoutButton\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Historique=()=>{const[chartData,setChartData]=useState({});useEffect(()=>{const fetchHistory=async()=>{try{const API_URL=window.location.hostname===\"localhost\"?\"http://localhost:4000\":\"https://myday-back.onrender.com\";const response=await axios.get(`${API_URL}/user-history`,{withCredentials:true});const historyData=response.data;const labels=historyData.map(entry=>new Date(entry.userLocalDate).toLocaleDateString());const data={labels,datasets:[{label:'Joie',data:historyData.map(entry=>entry.feeling1),borderColor:'rgba(75, 192, 192, 1)',fill:false},{label:'Stress',data:historyData.map(entry=>entry.feeling2),borderColor:'rgba(153, 102, 255, 1)',fill:false},{label:'Colère',data:historyData.map(entry=>entry.feeling3),borderColor:'rgba(255, 99, 132, 1)',fill:false},{label:'Légèreté',data:historyData.map(entry=>entry.feeling4),borderColor:'rgba(255, 206, 86, 1)',fill:false}]};setChartData(data);}catch(error){console.error(\"Erreur lors de la récupération de l'historique :\",error);}};fetchHistory();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Historique des \\xC9motions\"}),chartData.labels&&/*#__PURE__*/_jsx(Line,{data:chartData}),/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"button-container\",children:/*#__PURE__*/_jsx(LogoutButton,{})})})]});};export default Historique;","map":{"version":3,"names":["React","useState","useEffect","Line","axios","LogoutButton","jsx","_jsx","jsxs","_jsxs","Historique","chartData","setChartData","fetchHistory","API_URL","window","location","hostname","response","get","withCredentials","historyData","data","labels","map","entry","Date","userLocalDate","toLocaleDateString","datasets","label","feeling1","borderColor","fill","feeling2","feeling3","feeling4","error","console","children","className"],"sources":["C:/Users/850_G5/Documents/Formation_Dot_Net/myday/front-end/src/Historique.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Line } from 'react-chartjs-2';\r\nimport axios from 'axios';\r\nimport LogoutButton from './LogoutButton'; // Importer le composant LogoutButton\r\n\r\nconst Historique = () => {\r\n  const [chartData, setChartData] = useState({});\r\n\r\n  useEffect(() => {\r\n    const fetchHistory = async () => {\r\n      try {\r\n        const API_URL =\r\n          window.location.hostname === \"localhost\"\r\n            ? \"http://localhost:4000\"\r\n            : \"https://myday-back.onrender.com\";\r\n\r\n        const response = await axios.get(`${API_URL}/user-history`, {\r\n          withCredentials: true,\r\n        });\r\n\r\n        const historyData = response.data;\r\n        const labels = historyData.map(entry => new Date(entry.userLocalDate).toLocaleDateString());\r\n        const data = {\r\n          labels,\r\n          datasets: [\r\n            {\r\n              label: 'Joie',\r\n              data: historyData.map(entry => entry.feeling1),\r\n              borderColor: 'rgba(75, 192, 192, 1)',\r\n              fill: false,\r\n            },\r\n            {\r\n              label: 'Stress',\r\n              data: historyData.map(entry => entry.feeling2),\r\n              borderColor: 'rgba(153, 102, 255, 1)',\r\n              fill: false,\r\n            },\r\n            {\r\n              label: 'Colère',\r\n              data: historyData.map(entry => entry.feeling3),\r\n              borderColor: 'rgba(255, 99, 132, 1)',\r\n              fill: false,\r\n            },\r\n            {\r\n              label: 'Légèreté',\r\n              data: historyData.map(entry => entry.feeling4),\r\n              borderColor: 'rgba(255, 206, 86, 1)',\r\n              fill: false,\r\n            },\r\n          ],\r\n        };\r\n\r\n        setChartData(data);\r\n      } catch (error) {\r\n        console.error(\"Erreur lors de la récupération de l'historique :\", error);\r\n      }\r\n    };\r\n\r\n    fetchHistory();\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <h2>Historique des Émotions</h2>\r\n      {chartData.labels && (\r\n        <Line data={chartData} />\r\n      )}\r\n      <form>\r\n      <div className='button-container'>\r\n          <LogoutButton />\r\n        </div>\r\n    </form>\r\n    </div>\r\n    \r\n  );\r\n};\r\n\r\nexport default Historique;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,IAAI,KAAQ,iBAAiB,CACtC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,YAAY,KAAM,gBAAgB,CAAE;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3C,KAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,CACvB,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGX,QAAQ,CAAC,CAAC,CAAC,CAAC,CAE9CC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAW,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAC,OAAO,CACXC,MAAM,CAACC,QAAQ,CAACC,QAAQ,GAAK,WAAW,CACpC,uBAAuB,CACvB,iCAAiC,CAEvC,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAd,KAAK,CAACe,GAAG,CAAC,GAAGL,OAAO,eAAe,CAAE,CAC1DM,eAAe,CAAE,IACnB,CAAC,CAAC,CAEF,KAAM,CAAAC,WAAW,CAAGH,QAAQ,CAACI,IAAI,CACjC,KAAM,CAAAC,MAAM,CAAGF,WAAW,CAACG,GAAG,CAACC,KAAK,EAAI,GAAI,CAAAC,IAAI,CAACD,KAAK,CAACE,aAAa,CAAC,CAACC,kBAAkB,CAAC,CAAC,CAAC,CAC3F,KAAM,CAAAN,IAAI,CAAG,CACXC,MAAM,CACNM,QAAQ,CAAE,CACR,CACEC,KAAK,CAAE,MAAM,CACbR,IAAI,CAAED,WAAW,CAACG,GAAG,CAACC,KAAK,EAAIA,KAAK,CAACM,QAAQ,CAAC,CAC9CC,WAAW,CAAE,uBAAuB,CACpCC,IAAI,CAAE,KACR,CAAC,CACD,CACEH,KAAK,CAAE,QAAQ,CACfR,IAAI,CAAED,WAAW,CAACG,GAAG,CAACC,KAAK,EAAIA,KAAK,CAACS,QAAQ,CAAC,CAC9CF,WAAW,CAAE,wBAAwB,CACrCC,IAAI,CAAE,KACR,CAAC,CACD,CACEH,KAAK,CAAE,QAAQ,CACfR,IAAI,CAAED,WAAW,CAACG,GAAG,CAACC,KAAK,EAAIA,KAAK,CAACU,QAAQ,CAAC,CAC9CH,WAAW,CAAE,uBAAuB,CACpCC,IAAI,CAAE,KACR,CAAC,CACD,CACEH,KAAK,CAAE,UAAU,CACjBR,IAAI,CAAED,WAAW,CAACG,GAAG,CAACC,KAAK,EAAIA,KAAK,CAACW,QAAQ,CAAC,CAC9CJ,WAAW,CAAE,uBAAuB,CACpCC,IAAI,CAAE,KACR,CAAC,CAEL,CAAC,CAEDrB,YAAY,CAACU,IAAI,CAAC,CACpB,CAAE,MAAOe,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,kDAAkD,CAAEA,KAAK,CAAC,CAC1E,CACF,CAAC,CAEDxB,YAAY,CAAC,CAAC,CAChB,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEJ,KAAA,QAAA8B,QAAA,eACEhC,IAAA,OAAAgC,QAAA,CAAI,4BAAuB,CAAI,CAAC,CAC/B5B,SAAS,CAACY,MAAM,eACfhB,IAAA,CAACJ,IAAI,EAACmB,IAAI,CAAEX,SAAU,CAAE,CACzB,cACDJ,IAAA,SAAAgC,QAAA,cACAhC,IAAA,QAAKiC,SAAS,CAAC,kBAAkB,CAAAD,QAAA,cAC7BhC,IAAA,CAACF,YAAY,GAAE,CAAC,CACb,CAAC,CACJ,CAAC,EACF,CAAC,CAGV,CAAC,CAED,cAAe,CAAAK,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}