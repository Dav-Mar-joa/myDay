{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./styles/Home.css';import'./styles/Mobile.css';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Settings(){const[feelings,setFeelings]=useState([]);const[editingIndex,setEditingIndex]=useState(null);const[modifiedFeelings,setModifiedFeelings]=useState({});const[showConfirmModification,setShowConfirmModification]=useState(false);// Nouveau state pour afficher la confirmation\nconst[modificationIndex,setModificationIndex]=useState(null);// Indique quel feeling est en modification\nuseEffect(()=>{fetch('/getFeelings').then(res=>res.json()).then(data=>setFeelings(data.feelings)).catch(err=>console.error(\"Erreur en r√©cup√©rant les √©motions :\",err));},[]);const handleInputChange=(index,value)=>{setModifiedFeelings(prev=>({...prev,[index]:value}));};const updateFeeling=index=>{const newFeeling=modifiedFeelings[index];if(!newFeeling)return;// Afficher le pop-up de confirmation avant la mise √† jour\nsetModificationIndex(index);setShowConfirmModification(true);};const confirmUpdateFeeling=()=>{const newFeeling=modifiedFeelings[modificationIndex];fetch('/updateFeeling',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({index:modificationIndex,newFeeling})}).then(res=>res.json()).then(data=>{if(data.success){const updatedFeelings=[...feelings];updatedFeelings[modificationIndex]=newFeeling;setFeelings(updatedFeelings);setEditingIndex(null);setModifiedFeelings({});setShowConfirmModification(false);// Fermer le pop-up\n}else{console.error(\"Erreur c√¥t√© serveur :\",data.message);}}).catch(err=>console.error(\"Erreur en mettant √† jour :\",err));};const cancelUpdateFeeling=()=>{setShowConfirmModification(false);// Annuler la modification et fermer le pop-up\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"M\"}),/*#__PURE__*/_jsx(\"span\",{children:\"y\"}),/*#__PURE__*/_jsx(\"span\",{children:\"D\"}),/*#__PURE__*/_jsx(\"span\",{children:\"a\"}),/*#__PURE__*/_jsx(\"span\",{children:\"y\"})]})}),/*#__PURE__*/_jsx(\"h5\",{children:\"Settings\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Historique des \\xE9motions :\"}),/*#__PURE__*/_jsx(\"ol\",{children:feelings.map((f,index)=>/*#__PURE__*/_jsx(\"li\",{children:editingIndex===index?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:f,onChange:e=>handleInputChange(index,e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateFeeling(index),children:\"\\u2714\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingIndex(null),children:\"\\u274C\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[f,/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingIndex(index),children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateFeeling(index),children:\"\\uD83D\\uDCDD\"}),\"  \"]})},index))}),/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"submit-button\",children:\"Home Page\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"droits\",children:\"\\xA9 2025 myDay. Tous droits r\\xE9serv\\xE9s. Cette application, ainsi que l\\u2019ensemble de son contenu, est prot\\xE9g\\xE9e par les lois en vigueur relatives \\xE0 la propri\\xE9t\\xE9 intellectuelle. Les donn\\xE9es qu\\u2019elle contient sont chiffr\\xE9es afin d\\u2019en garantir la s\\xE9curit\\xE9.\"})]});}export default Settings;","map":{"version":3,"names":["React","useEffect","useState","Link","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Settings","feelings","setFeelings","editingIndex","setEditingIndex","modifiedFeelings","setModifiedFeelings","showConfirmModification","setShowConfirmModification","modificationIndex","setModificationIndex","fetch","then","res","json","data","catch","err","console","error","handleInputChange","index","value","prev","updateFeeling","newFeeling","confirmUpdateFeeling","method","headers","body","JSON","stringify","success","updatedFeelings","message","cancelUpdateFeeling","className","children","map","f","type","defaultValue","onChange","e","target","onClick","to"],"sources":["C:/Users/850_G5/Documents/Formation_Dot_Net/myday/front-end/src/Settings.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport './styles/Home.css';\r\nimport './styles/Mobile.css';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Settings() {\r\n    const [feelings, setFeelings] = useState([]);\r\n    const [editingIndex, setEditingIndex] = useState(null);\r\n    const [modifiedFeelings, setModifiedFeelings] = useState({});\r\n    const [showConfirmModification, setShowConfirmModification] = useState(false); // Nouveau state pour afficher la confirmation\r\n    const [modificationIndex, setModificationIndex] = useState(null); // Indique quel feeling est en modification\r\n\r\n    useEffect(() => {\r\n        fetch('/getFeelings')\r\n            .then(res => res.json())\r\n            .then(data => setFeelings(data.feelings))\r\n            .catch(err => console.error(\"Erreur en r√©cup√©rant les √©motions :\", err));\r\n    }, []);\r\n\r\n    const handleInputChange = (index, value) => {\r\n        setModifiedFeelings(prev => ({\r\n            ...prev,\r\n            [index]: value\r\n        }));\r\n    };\r\n\r\n    const updateFeeling = (index) => {\r\n        const newFeeling = modifiedFeelings[index];\r\n        if (!newFeeling) return;\r\n\r\n        // Afficher le pop-up de confirmation avant la mise √† jour\r\n        setModificationIndex(index);\r\n        setShowConfirmModification(true);\r\n    };\r\n\r\n    const confirmUpdateFeeling = () => {\r\n        const newFeeling = modifiedFeelings[modificationIndex];\r\n        fetch('/updateFeeling', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({ index: modificationIndex, newFeeling })\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            if (data.success) {\r\n                const updatedFeelings = [...feelings];\r\n                updatedFeelings[modificationIndex] = newFeeling;\r\n                setFeelings(updatedFeelings);\r\n                setEditingIndex(null);\r\n                setModifiedFeelings({});\r\n                setShowConfirmModification(false); // Fermer le pop-up\r\n            } else {\r\n                console.error(\"Erreur c√¥t√© serveur :\", data.message);\r\n            }\r\n        })\r\n        .catch(err => console.error(\"Erreur en mettant √† jour :\", err));\r\n    };\r\n\r\n    const cancelUpdateFeeling = () => {\r\n        setShowConfirmModification(false); // Annuler la modification et fermer le pop-up\r\n    };\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"header\">\r\n                <h1>\r\n                    <span>M</span><span>y</span><span>D</span><span>a</span><span>y</span>\r\n                </h1>\r\n            </div>\r\n\r\n            <h5>Settings</h5>\r\n            <p>Historique des √©motions :</p>\r\n            <ol>\r\n                {feelings.map((f, index) => (\r\n                    <li key={index}>\r\n                        {editingIndex === index ? (\r\n                            <>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    defaultValue={f}\r\n                                    onChange={(e) => handleInputChange(index, e.target.value)}\r\n                                />\r\n                                <button onClick={() => updateFeeling(index)}>‚úîÔ∏è</button>\r\n                                <button onClick={() => setEditingIndex(null)}>‚ùå</button>\r\n                            </>\r\n                        ) : (\r\n                            <>\r\n                                {f}\r\n                                <button onClick={() => setEditingIndex(index)}>‚úèÔ∏è</button>\r\n                                <button onClick={() => updateFeeling(index)}>üìù</button>  {/* Bouton pour modifier */}\r\n                            </>\r\n                        )}\r\n                    </li>\r\n                ))}\r\n            </ol>\r\n\r\n            {/* Pop-up de confirmation pour valider la modification */}\r\n            {/* {showConfirmModification && (\r\n                <div className=\"confirmation-popup\">\r\n                    <p>√ätes-vous s√ªr de vouloir valider cette modification ?</p>\r\n                    <button onClick={confirmUpdateFeeling}>Oui</button>\r\n                    <button onClick={cancelUpdateFeeling}>Non</button>\r\n                </div>\r\n            )} */}\r\n\r\n            <Link to=\"/\">\r\n                <button type=\"button\" className=\"submit-button\">Home Page</button>\r\n            </Link>\r\n\r\n            <p className=\"droits\">\r\n                ¬© 2025 myDay. Tous droits r√©serv√©s. Cette application, ainsi que l‚Äôensemble de son contenu, est prot√©g√©e par les lois en vigueur relatives √† la propri√©t√© intellectuelle. Les donn√©es qu‚Äôelle contient sont chiffr√©es afin d‚Äôen garantir la s√©curit√©.\r\n            </p>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Settings;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}