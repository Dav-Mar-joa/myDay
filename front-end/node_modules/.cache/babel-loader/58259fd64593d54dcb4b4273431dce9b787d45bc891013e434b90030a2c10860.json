{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./styles/Home.css';import'./styles/Mobile.css';import{Link,useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function DelUser(){const[acceptedTerms,setAcceptedTerms]=useState(false);const[error,setError]=useState(null);// Pour gérer les erreurs\nconst[success,setSuccess]=useState(null);// Pour afficher un message de succès\nconst navigate=useNavigate();// Pour la redirection après suppression\nuseEffect(()=>{const fetchUserTheme=async()=>{try{const API_URL=window.location.hostname==='localhost'?'http://localhost:4000':'https://myday-back.onrender.com';const response=await fetch(`${API_URL}/user-feelings`,{method:'GET',headers:{'Content-Type':'application/json'},credentials:'include'});const dataFeelings=await response.json();document.body.className=dataFeelings.theme;}catch(error){console.error('Erreur lors de la récupération des émotions :',error);}};fetchUserTheme();},[]);const handleDelete=async()=>{try{const API_URL=window.location.hostname==='localhost'?'http://localhost:4000':'https://myday-back.onrender.com';const response=await fetch(`${API_URL}/DelUser`,{method:'POST',headers:{'Content-Type':'application/json'},credentials:'include'});if(response.ok){setSuccess('Compte supprimé avec succès !');setTimeout(()=>{navigate('/login');// Redirection vers la page de connexion ou autre\n},2000);}else{setError('Erreur lors de la suppression du compte.');}}catch(error){setError('Erreur lors de la suppression du compte.');console.error('Erreur:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"m\"}),/*#__PURE__*/_jsx(\"span\",{children:\"y\"}),/*#__PURE__*/_jsx(\"span\",{children:\"D\"}),/*#__PURE__*/_jsx(\"span\",{children:\"a\"}),/*#__PURE__*/_jsx(\"span\",{children:\"y\"})]})}),/*#__PURE__*/_jsx(\"h5\",{children:\"Suppression de compte\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"h4-bis\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"terms\",checked:acceptedTerms,onChange:e=>setAcceptedTerms(e.target.checked)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"terms\",children:\"En cliquant sur supprimer toutes mes donn\\xE9es sont d\\xE9finitivement perdues\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"submit-button-supprimer\",type:\"button\",onClick:handleDelete,disabled:!acceptedTerms,children:\"Supprimer\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error}),success&&/*#__PURE__*/_jsx(\"p\",{className:\"success\",children:success}),/*#__PURE__*/_jsx(\"hr\",{className:\"hr\"}),/*#__PURE__*/_jsx(Link,{to:\"/Settings\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"submit-button\",children:\"Settings\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"droits\",children:\"\\xA9 2025 myDay. Tous droits r\\xE9serv\\xE9s. Cette application, ainsi que l\\u2019ensemble de son contenu, est prot\\xE9g\\xE9e par les lois en vigueur relatives \\xE0 la propri\\xE9t\\xE9 intellectuelle. Les donn\\xE9es qu\\u2019elle contient sont chiffr\\xE9es afin d\\u2019en garantir la s\\xE9curit\\xE9.\"})]});}export default DelUser;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","jsx","_jsx","jsxs","_jsxs","DelUser","acceptedTerms","setAcceptedTerms","error","setError","success","setSuccess","navigate","fetchUserTheme","API_URL","window","location","hostname","response","fetch","method","headers","credentials","dataFeelings","json","document","body","className","theme","console","handleDelete","ok","setTimeout","children","type","id","checked","onChange","e","target","htmlFor","onClick","disabled","to"],"sources":["C:/Users/850_G5/Documents/Formation_Dot_Net/myday/front-end/src/DelUser.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './styles/Home.css';\r\nimport './styles/Mobile.css';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\n\r\nfunction DelUser() {\r\n  const [acceptedTerms, setAcceptedTerms] = useState(false);\r\n  const [error, setError] = useState(null); // Pour gérer les erreurs\r\n  const [success, setSuccess] = useState(null); // Pour afficher un message de succès\r\n  const navigate = useNavigate(); // Pour la redirection après suppression\r\n\r\n  useEffect(() => {\r\n    const fetchUserTheme = async () => {\r\n      try {\r\n        const API_URL =\r\n          window.location.hostname === 'localhost'\r\n            ? 'http://localhost:4000'\r\n            : 'https://myday-back.onrender.com';\r\n\r\n        const response = await fetch(`${API_URL}/user-feelings`, {\r\n          method: 'GET',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          credentials: 'include',\r\n        });\r\n\r\n        const dataFeelings = await response.json();\r\n        document.body.className = dataFeelings.theme;\r\n      } catch (error) {\r\n        console.error('Erreur lors de la récupération des émotions :', error);\r\n      }\r\n    };\r\n\r\n    fetchUserTheme();\r\n  }, []);\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      const API_URL =\r\n        window.location.hostname === 'localhost'\r\n          ? 'http://localhost:4000'\r\n          : 'https://myday-back.onrender.com';\r\n\r\n      const response = await fetch(`${API_URL}/DelUser`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        credentials: 'include',\r\n      });\r\n\r\n      if (response.ok) {\r\n        setSuccess('Compte supprimé avec succès !');\r\n        setTimeout(() => {\r\n          navigate('/login'); // Redirection vers la page de connexion ou autre\r\n        }, 2000);\r\n      } else {\r\n        setError('Erreur lors de la suppression du compte.');\r\n      }\r\n    } catch (error) {\r\n      setError('Erreur lors de la suppression du compte.');\r\n      console.error('Erreur:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"header\">\r\n        <h1>\r\n          <span>m</span>\r\n          <span>y</span>\r\n          <span>D</span>\r\n          <span>a</span>\r\n          <span>y</span>\r\n        </h1>\r\n      </div>\r\n\r\n      <h5>Suppression de compte</h5>\r\n\r\n      <form>\r\n        <div className=\"h4-bis\">\r\n          <input\r\n            type=\"checkbox\"\r\n            id=\"terms\"\r\n            checked={acceptedTerms}\r\n            onChange={(e) => setAcceptedTerms(e.target.checked)}\r\n          />\r\n          <label htmlFor=\"terms\">\r\n            En cliquant sur supprimer toutes mes données sont définitivement perdues\r\n          </label>\r\n        </div>\r\n        <button\r\n          className=\"submit-button-supprimer\"\r\n          type=\"button\"\r\n          onClick={handleDelete}\r\n          disabled={!acceptedTerms}\r\n        >\r\n          Supprimer\r\n        </button>\r\n      </form>\r\n\r\n      {error && <p className=\"error\">{error}</p>}\r\n      {success && <p className=\"success\">{success}</p>}\r\n\r\n      <hr className=\"hr\" />\r\n      <Link to=\"/Settings\">\r\n        <button type=\"button\" className=\"submit-button\">\r\n          Settings\r\n        </button>\r\n      </Link>\r\n\r\n      <p className=\"droits\">\r\n        © 2025 myDay. Tous droits réservés. Cette application, ainsi que l’ensemble de son\r\n        contenu, est protégée par les lois en vigueur relatives à la propriété intellectuelle. Les\r\n        données qu’elle contient sont chiffrées afin d’en garantir la sécurité.\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DelUser;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}