{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./styles/Home.css';import'./styles/Mobile.css';import{Link}from'react-router-dom';// import { useEffect } from 'react';\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const[pseudo,setPseudo]=useState('');const[password,setPassword]=useState('');const[errorMessage,setErrorMessage]=useState('');const[showPassword,setShowPassword]=useState(false);const handleSubmit=async e=>{e.preventDefault();// Ici, tu peux envoyer les donn√©es au backend ou g√©rer la logique de cr√©ation du compte\nconst userData={pseudo,password};console.log('User Data:',userData);document.body.className=\"colorful\";console.log(\"theme sur Login : \",document.body.className);// Effectuer l'envoi de ces donn√©es √† l'API ou base de donn√©es\ntry{// const API_URL=process.env.REACT_APP_API_URL || \"http://localhost:4000\";\n// const API_URL=\"https://myday-back.onrender.com\";\n// const API_URL = \"http://localhost:4000\";\nconst API_URL=window.location.hostname===\"localhost\"?\"http://localhost:4000\":\"https://myday-back.onrender.com\";const response=await fetch(`${API_URL}/Login`,{// const response = await fetch(\"http://localhost:4000/Login\", {\nmethod:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(userData),credentials:'include'});const data=await response.json();console.log(\"R√©ponse du serveur :\",data);// if (data.success) {\n//     window.location.href = data.redirectUrl;\n//     document.body.classList.add(data.theme);\n// }\n// else {\n// // Si le serveur renvoie un message d'erreur, l'afficher ici\n//     setErrorMessage(data.errorMessage);\n// }\nif(data.success){// Appeler l'API pour r√©cup√©rer le th√®me apr√®s la connexion r√©ussie\nconst themeResponse=await fetch(`${API_URL}/getTheme`,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({pseudo:data.username}),// Utilise le pseudo retourn√© par le serveur\ncredentials:'include'});const themeData=await themeResponse.json();if(themeData.success&&themeData.theme){// Appliquer le th√®me et le stocker dans localStorage\ndocument.body.classList.add(themeData.theme);localStorage.setItem('theme',themeData.theme);// Sauvegarde du th√®me dans localStorage\n}// Rediriger apr√®s avoir appliqu√© le th√®me\nwindow.location.href=data.redirectUrl;}else{setErrorMessage(data.errorMessage);}}catch(error){console.error(\"Erreur lors de l'envoi :\",error);}};useEffect(()=>{document.body.className=\"colorful\";console.log(\"Th√®me appliqu√© √† l'arriv√©e sur la page :\",document.body.className);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"m\"}),/*#__PURE__*/_jsx(\"span\",{children:\"y\"}),/*#__PURE__*/_jsx(\"span\",{children:\"D\"}),/*#__PURE__*/_jsx(\"span\",{children:\"a\"}),/*#__PURE__*/_jsx(\"span\",{children:\"y\"})]})}),/*#__PURE__*/_jsx(\"h5\",{children:\"Connexion\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"h4\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"pseudo\",children:\"Pseudo : \"}),/*#__PURE__*/_jsx(\"input\",{className:\"login-input\",type:\"text\",id:\"pseudo\",name:\"pseudo\",value:pseudo,onChange:e=>setPseudo(e.target.value),required:true,placeholder:\"\"})]}),/*#__PURE__*/_jsxs(\"h4\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"mot de pass\",children:\"Mot de pass : \"}),/*#__PURE__*/_jsx(\"input\",{className:\"login-input\",type:showPassword?\"text\":\"password\",id:\"password\",name:\"password\",value:password,onChange:e=>setPassword(e.target.value),required:true,placeholder:\"\"}),/*#__PURE__*/_jsx(\"butt\",{type:\"button\",onClick:()=>setShowPassword(!showPassword),className:\"button-option\",children:showPassword?\"üòé\":\"üëÄ\"})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"hr\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"boutton-clear-submit-index\",children:[/*#__PURE__*/_jsx(Link,{to:\"/Register\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"submit-button\",children:\"Cr\\xE9er un compte\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-button\",children:\"Valider \"})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"hr\"}),/*#__PURE__*/_jsx(\"div\",{className:\"boutton-clear-submit-index-idOublie\",children:/*#__PURE__*/_jsx(Link,{to:\"/Identifiants\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"submit-button-id\",children:\"Identifiants oubli\\xE9s\"})})})]}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errorMessage}),/*#__PURE__*/_jsx(\"p\",{className:\"droits\",children:\"\\xA9 2025 myDay. Tous droits r\\xE9serv\\xE9s. Cette application, ainsi que l\\u2019ensemble de son contenu, est prot\\xE9g\\xE9e par les lois en vigueur relatives \\xE0 la propri\\xE9t\\xE9 intellectuelle. Les donn\\xE9es qu\\u2019elle contient sont chiffr\\xE9es afin d\\u2019en garantir la s\\xE9curit\\xE9. \"})]});}export default Login;","map":{"version":3,"names":["React","useState","useEffect","Link","jsx","_jsx","jsxs","_jsxs","Login","pseudo","setPseudo","password","setPassword","errorMessage","setErrorMessage","showPassword","setShowPassword","handleSubmit","e","preventDefault","userData","console","log","document","body","className","API_URL","window","location","hostname","response","fetch","method","headers","JSON","stringify","credentials","data","json","success","themeResponse","username","themeData","theme","classList","add","localStorage","setItem","href","redirectUrl","error","children","onSubmit","htmlFor","type","id","name","value","onChange","target","required","placeholder","onClick","to"],"sources":["C:/Users/850_G5/Documents/Formation_Dot_Net/myday/front-end/src/Login.js"],"sourcesContent":["import React, { useState, useEffect} from 'react';\r\nimport './styles/Home.css';\r\nimport './styles/Mobile.css';\r\nimport { Link } from 'react-router-dom';\r\n// import { useEffect } from 'react';\r\n\r\nfunction Login() {\r\n    const [pseudo, setPseudo] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [errorMessage, setErrorMessage] = useState('');\r\n    const [showPassword,setShowPassword]=useState(false)\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n    \r\n        // Ici, tu peux envoyer les donn√©es au backend ou g√©rer la logique de cr√©ation du compte\r\n        const userData = {\r\n          pseudo,\r\n          password,\r\n        };\r\n        \r\n        console.log('User Data:', userData);\r\n        document.body.className = \"colorful\";\r\n        console.log(\"theme sur Login : \",document.body.className)\r\n        // Effectuer l'envoi de ces donn√©es √† l'API ou base de donn√©es\r\n\r\n        try {\r\n            // const API_URL=process.env.REACT_APP_API_URL || \"http://localhost:4000\";\r\n\r\n            // const API_URL=\"https://myday-back.onrender.com\";\r\n            // const API_URL = \"http://localhost:4000\";\r\n            const API_URL =\r\n                window.location.hostname === \"localhost\"\r\n                    ? \"http://localhost:4000\"\r\n                    : \"https://myday-back.onrender.com\";\r\n                    \r\n            \r\n\r\n            const response = await fetch(`${API_URL}/Login`, {\r\n            // const response = await fetch(\"http://localhost:4000/Login\", {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify(userData),\r\n                credentials: 'include'\r\n            });\r\n    \r\n            const data = await response.json();\r\n            console.log(\"R√©ponse du serveur :\", data);\r\n    \r\n            // if (data.success) {\r\n            //     window.location.href = data.redirectUrl;\r\n            //     document.body.classList.add(data.theme);\r\n            // }\r\n            // else {\r\n            // // Si le serveur renvoie un message d'erreur, l'afficher ici\r\n            //     setErrorMessage(data.errorMessage);\r\n            // }\r\n            if (data.success) {\r\n                // Appeler l'API pour r√©cup√©rer le th√®me apr√®s la connexion r√©ussie\r\n                const themeResponse = await fetch(`${API_URL}/getTheme`, {\r\n                    method: \"POST\",\r\n                    headers: { \"Content-Type\": \"application/json\" },\r\n                    body: JSON.stringify({ pseudo: data.username }),  // Utilise le pseudo retourn√© par le serveur\r\n                    credentials: 'include'\r\n                });\r\n\r\n                const themeData = await themeResponse.json();\r\n                if (themeData.success && themeData.theme) {\r\n                    // Appliquer le th√®me et le stocker dans localStorage\r\n                    document.body.classList.add(themeData.theme);\r\n                    localStorage.setItem('theme', themeData.theme);  // Sauvegarde du th√®me dans localStorage\r\n                }\r\n\r\n                // Rediriger apr√®s avoir appliqu√© le th√®me\r\n                window.location.href = data.redirectUrl;\r\n            } else {\r\n                setErrorMessage(data.errorMessage);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Erreur lors de l'envoi :\", error);\r\n        }\r\n      };\r\n\r\n      useEffect(() => {\r\n        document.body.className = \"colorful\"; \r\n        console.log(\"Th√®me appliqu√© √† l'arriv√©e sur la page :\", document.body.className);\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"header\">\r\n            <h1>\r\n                <span>m</span><span>y</span><span>D</span><span>a</span><span>y</span>\r\n                </h1>\r\n            </div>\r\n            <h5>Connexion</h5>\r\n            <form onSubmit={handleSubmit}>\r\n                <h4>\r\n                    <label htmlFor=\"pseudo\" >Pseudo : </label>\r\n                    <input className=\"login-input\"\r\n                    type=\"text\"\r\n                    id=\"pseudo\"\r\n                    name=\"pseudo\"\r\n                    value={pseudo}\r\n                    onChange={(e) => setPseudo(e.target.value)}\r\n                    required\r\n                    placeholder=\"\"\r\n                    />\r\n                </h4>\r\n                <h4>\r\n                    <label htmlFor=\"mot de pass\" >Mot de pass : </label>\r\n                    <input className=\"login-input\"\r\n                    type={showPassword ? \"text\" : \"password\"}\r\n                    id=\"password\"\r\n                    name=\"password\"\r\n                    value={password}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                    required\r\n                    placeholder=\"\"\r\n                    />\r\n                    <butt\r\n                    type=\"button\" \r\n                    onClick={() => setShowPassword(!showPassword)}\r\n                    className=\"button-option\"\r\n                >\r\n                    {showPassword ? \"üòé\" : \"üëÄ\"}\r\n                </butt>\r\n                </h4>\r\n                \r\n                <hr className=\"hr\" />\r\n                <div className=\"boutton-clear-submit-index\">\r\n                    <Link to=\"/Register\">\r\n                        <button type=\"button\" className=\"submit-button\">\r\n                            Cr√©er un compte\r\n                        </button>\r\n                    </Link>\r\n                        <button \r\n                        type=\"submit\"\r\n                        className=\"submit-button\">\r\n                        Valider </button>\r\n                </div>\r\n\r\n                <hr className=\"hr\" />\r\n                <div className=\"boutton-clear-submit-index-idOublie\">\r\n                    <Link to=\"/Identifiants\">\r\n                        <button type=\"button\" className=\"submit-button-id\">\r\n                            Identifiants oubli√©s\r\n                        </button>\r\n                    </Link>\r\n                </div>\r\n                \r\n            </form>\r\n            {errorMessage && (<p className=\"error-message\">{errorMessage}</p>)}\r\n            <p className =\"droits\">¬© 2025 myDay. Tous droits r√©serv√©s.\r\n            Cette application, ainsi que l‚Äôensemble de son contenu, est prot√©g√©e par les lois en vigueur relatives √† la propri√©t√© intellectuelle. Les donn√©es qu‚Äôelle contient sont chiffr√©es afin d‚Äôen garantir la s√©curit√©. </p>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}