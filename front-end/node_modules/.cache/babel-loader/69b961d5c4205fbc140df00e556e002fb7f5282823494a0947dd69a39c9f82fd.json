{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./styles/Home.css';import'./styles/Mobile.css';import{Link}from'react-router-dom';import Swal from'sweetalert2';// Import SweetAlert2\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Settings(){const[feelings,setFeelings]=useState([]);const[editingIndex,setEditingIndex]=useState(null);const[modifiedFeelings,setModifiedFeelings]=useState({});useEffect(()=>{fetch('/getFeelings').then(res=>res.json()).then(data=>setFeelings(data.feelings)).catch(err=>console.error(\"Erreur en r√©cup√©rant les √©motions :\",err));},[]);const handleInputChange=(index,value)=>{setModifiedFeelings(prev=>({...prev,[index]:value}));};const updateFeeling=index=>{const newFeeling=modifiedFeelings[index];if(!newFeeling)return;fetch('/updateFeeling',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({index,newFeeling})}).then(res=>res.json()).then(data=>{if(data.success){const updatedFeelings=[...feelings];updatedFeelings[index]=newFeeling;setFeelings(updatedFeelings);setEditingIndex(null);setModifiedFeelings({});}else{console.error(\"Erreur c√¥t√© serveur :\",data.message);}}).catch(err=>console.error(\"Erreur en mettant √† jour :\",err));};const handleDeleteConfirmation=index=>{Swal.fire({title:'√ätes-vous s√ªr de vouloir supprimer cette donn√©e ?',text:\"Cette action est irr√©versible.\",icon:'warning',showCancelButton:true,confirmButtonText:'Oui, supprimer',cancelButtonText:'Annuler'}).then(result=>{if(result.isConfirmed){fetch('/deleteFeeling',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({index})}).then(res=>res.json()).then(data=>{if(data.success){const updatedFeelings=feelings.filter((_,i)=>i!==index);setFeelings(updatedFeelings);}else{console.error(\"Erreur c√¥t√© serveur :\",data.message);}}).catch(err=>console.error(\"Erreur en supprimant :\",err));}});};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"M\"}),/*#__PURE__*/_jsx(\"span\",{children:\"y\"}),/*#__PURE__*/_jsx(\"span\",{children:\"D\"}),/*#__PURE__*/_jsx(\"span\",{children:\"a\"}),/*#__PURE__*/_jsx(\"span\",{children:\"y\"})]})}),/*#__PURE__*/_jsx(\"h5\",{children:\"Settings\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Historique des \\xE9motions :\"}),/*#__PURE__*/_jsx(\"ol\",{children:feelings.map((f,index)=>/*#__PURE__*/_jsx(\"ol\",{children:editingIndex===index?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:f,onChange:e=>handleInputChange(index,e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateFeeling(index),children:\"\\u2714\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingIndex(null),children:\"\\u274C\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[f,/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingIndex(index),children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteConfirmation(index),children:\"\\uD83D\\uDDD1\\uFE0F\"})]})},index))}),/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"submit-button\",children:\"Home Page\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"droits\",children:\"\\xA9 2025 myDay. Tous droits r\\xE9serv\\xE9s. Cette application, ainsi que l\\u2019ensemble de son contenu, est prot\\xE9g\\xE9e par les lois en vigueur relatives \\xE0 la propri\\xE9t\\xE9 intellectuelle. Les donn\\xE9es qu\\u2019elle contient sont chiffr\\xE9es afin d\\u2019en garantir la s\\xE9curit\\xE9.\"})]});}export default Settings;","map":{"version":3,"names":["React","useEffect","useState","Link","Swal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Settings","feelings","setFeelings","editingIndex","setEditingIndex","modifiedFeelings","setModifiedFeelings","fetch","then","res","json","data","catch","err","console","error","handleInputChange","index","value","prev","updateFeeling","newFeeling","method","headers","body","JSON","stringify","success","updatedFeelings","message","handleDeleteConfirmation","fire","title","text","icon","showCancelButton","confirmButtonText","cancelButtonText","result","isConfirmed","filter","_","i","className","children","map","f","type","defaultValue","onChange","e","target","onClick","to"],"sources":["C:/Users/850_G5/Documents/Formation_Dot_Net/myday/front-end/src/Settings.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport './styles/Home.css';\r\nimport './styles/Mobile.css';\r\nimport { Link } from 'react-router-dom';\r\nimport Swal from 'sweetalert2';  // Import SweetAlert2\r\n\r\nfunction Settings() {\r\n    const [feelings, setFeelings] = useState([]);\r\n    const [editingIndex, setEditingIndex] = useState(null);\r\n    const [modifiedFeelings, setModifiedFeelings] = useState({});\r\n\r\n    useEffect(() => {\r\n        fetch('/getFeelings')\r\n            .then(res => res.json())\r\n            .then(data => setFeelings(data.feelings))\r\n            .catch(err => console.error(\"Erreur en r√©cup√©rant les √©motions :\", err));\r\n    }, []);\r\n\r\n    const handleInputChange = (index, value) => {\r\n        setModifiedFeelings(prev => ({\r\n            ...prev,\r\n            [index]: value\r\n        }));\r\n    };\r\n\r\n    const updateFeeling = (index) => {\r\n        const newFeeling = modifiedFeelings[index];\r\n        if (!newFeeling) return;\r\n\r\n        fetch('/updateFeeling', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({ index, newFeeling })\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            if (data.success) {\r\n                const updatedFeelings = [...feelings];\r\n                updatedFeelings[index] = newFeeling;\r\n                setFeelings(updatedFeelings);\r\n                setEditingIndex(null);\r\n                setModifiedFeelings({});\r\n            } else {\r\n                console.error(\"Erreur c√¥t√© serveur :\", data.message);\r\n            }\r\n        })\r\n        .catch(err => console.error(\"Erreur en mettant √† jour :\", err));\r\n    };\r\n\r\n    const handleDeleteConfirmation = (index) => {\r\n        Swal.fire({\r\n            title: '√ätes-vous s√ªr de vouloir supprimer cette donn√©e ?',\r\n            text: \"Cette action est irr√©versible.\",\r\n            icon: 'warning',\r\n            showCancelButton: true,\r\n            confirmButtonText: 'Oui, supprimer',\r\n            cancelButtonText: 'Annuler'\r\n        }).then((result) => {\r\n            if (result.isConfirmed) {\r\n                fetch('/deleteFeeling', {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json'\r\n                    },\r\n                    body: JSON.stringify({ index })\r\n                })\r\n                .then(res => res.json())\r\n                .then(data => {\r\n                    if (data.success) {\r\n                        const updatedFeelings = feelings.filter((_, i) => i !== index);\r\n                        setFeelings(updatedFeelings);\r\n                    } else {\r\n                        console.error(\"Erreur c√¥t√© serveur :\", data.message);\r\n                    }\r\n                })\r\n                .catch(err => console.error(\"Erreur en supprimant :\", err));\r\n            }\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"header\">\r\n                <h1>\r\n                    <span>M</span><span>y</span><span>D</span><span>a</span><span>y</span>\r\n                </h1>\r\n            </div>\r\n\r\n            <h5>Settings</h5>\r\n            <p>Historique des √©motions :</p>\r\n            <ol>\r\n                {feelings.map((f, index) => (\r\n                    <ol key={index}>\r\n                        {editingIndex === index ? (\r\n                            <>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    defaultValue={f}\r\n                                    onChange={(e) => handleInputChange(index, e.target.value)}\r\n                                />\r\n                                <button onClick={() => updateFeeling(index)}>‚úîÔ∏è</button>\r\n                                <button onClick={() => setEditingIndex(null)}>‚ùå</button>\r\n                            </>\r\n                        ) : (\r\n                            <>\r\n                                {f}\r\n                                <button onClick={() => setEditingIndex(index)}>‚úèÔ∏è</button>\r\n                                <button onClick={() => handleDeleteConfirmation(index)}>üóëÔ∏è</button>\r\n                            </>\r\n                        )}\r\n                    </ol>\r\n                ))}\r\n            </ol>\r\n\r\n            <Link to=\"/\">\r\n                <button type=\"button\" className=\"submit-button\">Home Page</button>\r\n            </Link>\r\n\r\n            <p className=\"droits\">\r\n                ¬© 2025 myDay. Tous droits r√©serv√©s. Cette application, ainsi que l‚Äôensemble de son contenu, est prot√©g√©e par les lois en vigueur relatives √† la propri√©t√© intellectuelle. Les donn√©es qu‚Äôelle contient sont chiffr√©es afin d‚Äôen garantir la s√©curit√©.\r\n            </p>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Settings;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}