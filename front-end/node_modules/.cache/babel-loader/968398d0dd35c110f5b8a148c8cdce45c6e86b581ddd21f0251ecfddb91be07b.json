{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./styles/Home.css';import'./styles/Mobile.css';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Settings(){const[feelings,setFeelings]=useState([]);const[editingIndex,setEditingIndex]=useState(null);const[modifiedFeelings,setModifiedFeelings]=useState({});useEffect(()=>{fetch('/getFeelings').then(res=>res.json()).then(data=>setFeelings(data.feelings)).catch(err=>console.error(\"Erreur en récupérant les émotions :\",err));},[]);const handleInputChange=(index,value)=>{setModifiedFeelings(prev=>({...prev,[index]:value}));};const updateFeeling=index=>{const newFeeling=modifiedFeelings[index];if(!newFeeling)return;// Envoie du feeling et de la date actuelle au serveur\nfetch('/updateFeeling',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({index})}).then(res=>res.json()).then(data=>{if(data.success){const updatedFeelings=[...feelings];updatedFeelings[index]={feeling:'',// Réinitialise l'émotion à vide\ndate:new Date().toLocaleString()// Nouvelle date d'enregistrement\n};setFeelings(updatedFeelings);setEditingIndex(null);setModifiedFeelings({});}else{console.error(\"Erreur côté serveur :\",data.message);}}).catch(err=>console.error(\"Erreur en mettant à jour :\",err));};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"M\"}),/*#__PURE__*/_jsx(\"span\",{children:\"y\"}),/*#__PURE__*/_jsx(\"span\",{children:\"D\"}),/*#__PURE__*/_jsx(\"span\",{children:\"a\"}),/*#__PURE__*/_jsx(\"span\",{children:\"y\"})]})}),/*#__PURE__*/_jsx(\"h5\",{children:\"Settings\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Historique des \\xE9motions :\"}),/*#__PURE__*/_jsx(\"ol\",{children:feelings.map((f,index)=>/*#__PURE__*/_jsx(\"ol\",{children:editingIndex===index?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:modifiedFeelings[index]||f.feeling// Affichage du sentiment actuel\n,onChange:e=>handleInputChange(index,e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(window.confirm(\"Es-tu sûr de vouloir réinitialiser cet index ? Cela effacera toutes les anciennes données.\")){updateFeeling(index);}},children:\"R\\xE9initialiser\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingIndex(null),children:\"Annuler\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[f.feeling||\"Aucune émotion définie\",\" (Derni\\xE8re modification : \",f.date,\")\",/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingIndex(index),children:\"Modifier\"})]})},index))}),/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"submit-button\",children:\"Home Page\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"droits\",children:\"\\xA9 2025 myDay. Tous droits r\\xE9serv\\xE9s. Cette application, ainsi que l\\u2019ensemble de son contenu, est prot\\xE9g\\xE9e par les lois en vigueur relatives \\xE0 la propri\\xE9t\\xE9 intellectuelle. Les donn\\xE9es qu\\u2019elle contient sont chiffr\\xE9es afin d\\u2019en garantir la s\\xE9curit\\xE9.\"})]});}export default Settings;","map":{"version":3,"names":["React","useEffect","useState","Link","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Settings","feelings","setFeelings","editingIndex","setEditingIndex","modifiedFeelings","setModifiedFeelings","fetch","then","res","json","data","catch","err","console","error","handleInputChange","index","value","prev","updateFeeling","newFeeling","method","headers","body","JSON","stringify","success","updatedFeelings","feeling","date","Date","toLocaleString","message","className","children","map","f","type","onChange","e","target","onClick","window","confirm","to"],"sources":["C:/Users/850_G5/Documents/Formation_Dot_Net/myday/front-end/src/Settings.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport './styles/Home.css';\r\nimport './styles/Mobile.css';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Settings() {\r\n    const [feelings, setFeelings] = useState([]);\r\n    const [editingIndex, setEditingIndex] = useState(null);\r\n    const [modifiedFeelings, setModifiedFeelings] = useState({});\r\n\r\n    useEffect(() => {\r\n        fetch('/getFeelings')\r\n            .then(res => res.json())\r\n            .then(data => setFeelings(data.feelings))\r\n            .catch(err => console.error(\"Erreur en récupérant les émotions :\", err));\r\n    }, []);\r\n\r\n    const handleInputChange = (index, value) => {\r\n        setModifiedFeelings(prev => ({\r\n            ...prev,\r\n            [index]: value\r\n        }));\r\n    };\r\n\r\n    const updateFeeling = (index) => {\r\n        const newFeeling = modifiedFeelings[index];\r\n        if (!newFeeling) return;\r\n\r\n        // Envoie du feeling et de la date actuelle au serveur\r\n        fetch('/updateFeeling', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({ index })\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            if (data.success) {\r\n                const updatedFeelings = [...feelings];\r\n                updatedFeelings[index] = {\r\n                    feeling: '',  // Réinitialise l'émotion à vide\r\n                    date: new Date().toLocaleString()  // Nouvelle date d'enregistrement\r\n                };\r\n                setFeelings(updatedFeelings);\r\n                setEditingIndex(null);\r\n                setModifiedFeelings({});\r\n            } else {\r\n                console.error(\"Erreur côté serveur :\", data.message);\r\n            }\r\n        })\r\n        .catch(err => console.error(\"Erreur en mettant à jour :\", err));\r\n    };\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"header\">\r\n                <h1>\r\n                    <span>M</span><span>y</span><span>D</span><span>a</span><span>y</span>\r\n                </h1>\r\n            </div>\r\n\r\n            <h5>Settings</h5>\r\n            <p>Historique des émotions :</p>\r\n            <ol>\r\n                {feelings.map((f, index) => (\r\n                    <ol key={index}>\r\n                        {editingIndex === index ? (\r\n                            <>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={modifiedFeelings[index] || f.feeling} // Affichage du sentiment actuel\r\n                                    onChange={(e) => handleInputChange(index, e.target.value)}\r\n                                />\r\n                                <button onClick={() => {\r\n                                    if (window.confirm(\"Es-tu sûr de vouloir réinitialiser cet index ? Cela effacera toutes les anciennes données.\")) {\r\n                                        updateFeeling(index);\r\n                                    }\r\n                                }}>Réinitialiser</button>\r\n                                <button onClick={() => setEditingIndex(null)}>Annuler</button>\r\n                            </>\r\n                        ) : (\r\n                            <>\r\n                                {f.feeling || \"Aucune émotion définie\"} (Dernière modification : {f.date})\r\n                                <button onClick={() => setEditingIndex(index)}>Modifier</button>\r\n                            </>\r\n                        )}\r\n                    </ol>\r\n                ))}\r\n            </ol>\r\n\r\n            <Link to=\"/\">\r\n                <button type=\"button\" className=\"submit-button\">Home Page</button>\r\n            </Link>\r\n\r\n            <p className=\"droits\">\r\n                © 2025 myDay. Tous droits réservés. Cette application, ainsi que l’ensemble de son contenu, est protégée par les lois en vigueur relatives à la propriété intellectuelle. Les données qu’elle contient sont chiffrées afin d’en garantir la sécurité.\r\n            </p>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Settings;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}