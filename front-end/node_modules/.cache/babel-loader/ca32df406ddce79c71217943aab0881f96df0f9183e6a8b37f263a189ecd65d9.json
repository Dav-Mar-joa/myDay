{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./styles/Home.css';import'./styles/Mobile.css';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Settings(){const[feelings,setFeelings]=useState([]);const[editingIndex,setEditingIndex]=useState(null);const[modifiedFeelings,setModifiedFeelings]=useState({});const[selectedOption,setSelectedOption]=useState('');// Ajouté pour gérer le thème\n// Fonction pour gérer le changement dans la liste déroulante\nconst handleSelectionChange=e=>{setSelectedOption(newTheme);// Appliquer la classe correspondante pour changer le thème\ndocument.body.className=newTheme;// Applique la classe choisie sur le body\n// if (pseudo) {\nfetch('/setTheme',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({theme:newTheme})}).then(res=>res.json()).then(data=>{if(data.success){console.log('Thème mis à jour avec succès');}else{console.error('Erreur lors de la mise à jour du thème');}}).catch(err=>console.error(\"Erreur en mettant à jour le thème :\",err));// }\n};useEffect(()=>{fetch('/getFeelings').then(res=>res.json()).then(data=>setFeelings(data.feelings)).catch(err=>console.error(\"Erreur en récupérant les émotions :\",err));// Charger le thème depuis la base\nconst pseudo=localStorage.getItem('username');if(pseudo){fetch('/getTheme',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({pseudo})}).then(res=>res.json()).then(data=>{if(data.success&&data.theme){setSelectedOption(data.theme);document.body.className=data.theme;}}).catch(err=>console.error(\"Erreur en récupérant le thème :\",err));}},[]);const handleInputChange=(index,value)=>{setModifiedFeelings(prev=>({...prev,[index]:value}));};const updateFeeling=index=>{const newFeeling=modifiedFeelings[index];if(!newFeeling)return;fetch('/updateFeeling',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({index,newFeeling})}).then(res=>res.json()).then(data=>{if(data.success){const updatedFeelings=[...feelings];updatedFeelings[index]=newFeeling;setFeelings(updatedFeelings);setEditingIndex(null);setModifiedFeelings({});}else{console.error(\"Erreur côté serveur :\",data.message);}}).catch(err=>console.error(\"Erreur en mettant à jour :\",err));};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"M\"}),/*#__PURE__*/_jsx(\"span\",{children:\"y\"}),/*#__PURE__*/_jsx(\"span\",{children:\"D\"}),/*#__PURE__*/_jsx(\"span\",{children:\"a\"}),/*#__PURE__*/_jsx(\"span\",{children:\"y\"})]})}),/*#__PURE__*/_jsx(\"h5\",{children:\"Theme : \"}),/*#__PURE__*/_jsxs(\"select\",{id:\"theme-select\",className:\"theme-select\",value:selectedOption,onChange:handleSelectionChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"colorful\",children:\"Color\\xE9\"}),/*#__PURE__*/_jsx(\"option\",{value:\"dark\",children:\"Sombre\"})]}),/*#__PURE__*/_jsx(\"h5\",{children:\"Emotions :\"}),/*#__PURE__*/_jsx(\"ol\",{children:feelings.map((f,index)=>/*#__PURE__*/_jsxs(\"ol\",{children:[editingIndex===index?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:f,onChange:e=>handleInputChange(index,e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"button-option\",onClick:()=>updateFeeling(index),children:\"\\u2714\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button-option\",onClick:()=>setEditingIndex(null),children:\"\\u274C\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[f,/*#__PURE__*/_jsx(\"button\",{className:\"button-option\",onClick:()=>setEditingIndex(index),children:\"\\u270F\\uFE0F\"})]}),index<feelings.length-1&&/*#__PURE__*/_jsx(\"hr\",{className:\"hr-settings\"})]},index))}),/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"submit-button\",children:\"Mes \\xE9motions\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"droits\",children:\"\\xA9 2025 myDay. Tous droits r\\xE9serv\\xE9s. Cette application, ainsi que l\\u2019ensemble de son contenu, est prot\\xE9g\\xE9e par les lois en vigueur relatives \\xE0 la propri\\xE9t\\xE9 intellectuelle. Les donn\\xE9es qu\\u2019elle contient sont chiffr\\xE9es afin d\\u2019en garantir la s\\xE9curit\\xE9.\"})]});}export default Settings;","map":{"version":3,"names":["React","useEffect","useState","Link","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Settings","feelings","setFeelings","editingIndex","setEditingIndex","modifiedFeelings","setModifiedFeelings","selectedOption","setSelectedOption","handleSelectionChange","e","newTheme","document","body","className","fetch","method","headers","JSON","stringify","theme","then","res","json","data","success","console","log","error","catch","err","pseudo","localStorage","getItem","handleInputChange","index","value","prev","updateFeeling","newFeeling","updatedFeelings","message","children","id","onChange","map","f","type","defaultValue","target","onClick","length","to"],"sources":["C:/Users/850_G5/Documents/Formation_Dot_Net/myday/front-end/src/Settings.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport './styles/Home.css';\r\nimport './styles/Mobile.css';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Settings() {\r\n    const [feelings, setFeelings] = useState([]);\r\n    const [editingIndex, setEditingIndex] = useState(null);\r\n    const [modifiedFeelings, setModifiedFeelings] = useState({});\r\n    const [selectedOption, setSelectedOption] = useState(''); // Ajouté pour gérer le thème\r\n\r\n    // Fonction pour gérer le changement dans la liste déroulante\r\n    const handleSelectionChange = (e) => {\r\n        setSelectedOption(newTheme);\r\n\r\n        // Appliquer la classe correspondante pour changer le thème\r\n        document.body.className = newTheme; // Applique la classe choisie sur le body\r\n\r\n        // if (pseudo) {\r\n            fetch('/setTheme', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({  theme: newTheme })\r\n            })\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                if (data.success) {\r\n                    console.log('Thème mis à jour avec succès');\r\n                } else {\r\n                    console.error('Erreur lors de la mise à jour du thème');\r\n                }\r\n            })\r\n            .catch(err => console.error(\"Erreur en mettant à jour le thème :\", err));\r\n        // }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetch('/getFeelings')\r\n        .then(res => res.json())\r\n        .then(data => setFeelings(data.feelings))\r\n        .catch(err => console.error(\"Erreur en récupérant les émotions :\", err));\r\n        \r\n    // Charger le thème depuis la base\r\n    const pseudo = localStorage.getItem('username');\r\n    if (pseudo) {\r\n        fetch('/getTheme', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ pseudo })\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            if (data.success && data.theme) {\r\n                setSelectedOption(data.theme);\r\n                document.body.className = data.theme;\r\n            }\r\n        })\r\n     \r\n        .catch(err => console.error(\"Erreur en récupérant le thème :\", err));\r\n    }\r\n    }, []);\r\n\r\n    const handleInputChange = (index, value) => {\r\n        setModifiedFeelings(prev => ({\r\n            ...prev,\r\n            [index]: value\r\n        }));\r\n    };\r\n\r\n\r\n    const updateFeeling = (index) => {\r\n        const newFeeling = modifiedFeelings[index];\r\n        if (!newFeeling) return;\r\n\r\n        fetch('/updateFeeling', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({ index, newFeeling })\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            if (data.success) {\r\n                const updatedFeelings = [...feelings];\r\n                updatedFeelings[index] = newFeeling;\r\n                setFeelings(updatedFeelings);\r\n                setEditingIndex(null);\r\n                setModifiedFeelings({});\r\n            } else {\r\n                console.error(\"Erreur côté serveur :\", data.message);\r\n            }\r\n        })\r\n        .catch(err => console.error(\"Erreur en mettant à jour :\", err));\r\n    };\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"header\">\r\n                <h1>\r\n                    <span>M</span><span>y</span><span>D</span><span>a</span><span>y</span>\r\n                </h1>\r\n            </div>\r\n            \r\n            <h5>Theme : </h5>\r\n            {/* <select id=\"theme-select\" class=\"theme-select\">\r\n            <option value=\"colorful\">Coloré</option>\r\n            <option value=\"dark\">not dev</option>\r\n            </select> */}\r\n\r\n            <select id=\"theme-select\" className=\"theme-select\" value={selectedOption} onChange={handleSelectionChange}>\r\n                <option value=\"colorful\">Coloré</option>\r\n                <option value=\"dark\">Sombre</option>\r\n            </select>\r\n\r\n            <h5>Emotions :</h5>\r\n            <ol>\r\n                {feelings.map((f, index) => (\r\n                    <ol key={index}>\r\n                        {editingIndex === index ? (\r\n                            <>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    defaultValue={f}\r\n                                    onChange={(e) => handleInputChange(index, e.target.value)}\r\n                                    \r\n                                />\r\n                                \r\n                                <button \r\n                                    className=\"button-option\"\r\n                                    onClick={() => updateFeeling(index)}>✔️</button>\r\n                                <button \r\n                                    className=\"button-option\"\r\n                                    onClick={() => setEditingIndex(null)}>❌</button>\r\n                               \r\n                            </>\r\n                        ) : (\r\n                            <>\r\n                                {f}\r\n                                <button \r\n                                    className=\"button-option\"\r\n                                    onClick={() => setEditingIndex(index)}>✏️</button>\r\n                            </>\r\n                        )}\r\n                         {index < feelings.length - 1 && <hr className=\"hr-settings\" />}\r\n                    </ol>\r\n                    \r\n                ))}\r\n            </ol>\r\n\r\n            <Link to=\"/\">\r\n                <button type=\"button\" className=\"submit-button\">Mes émotions</button>\r\n            </Link>\r\n\r\n            <p className=\"droits\">\r\n                © 2025 myDay. Tous droits réservés. Cette application, ainsi que l’ensemble de son contenu, est protégée par les lois en vigueur relatives à la propriété intellectuelle. Les données qu’elle contient sont chiffrées afin d’en garantir la sécurité.\r\n            </p>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Settings;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,mBAAmB,CAC1B,MAAO,qBAAqB,CAC5B,OAASC,IAAI,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAExC,QAAS,CAAAC,QAAQA,CAAA,CAAG,CAChB,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACW,YAAY,CAAEC,eAAe,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAACa,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGd,QAAQ,CAAC,CAAC,CAAC,CAAC,CAC5D,KAAM,CAACe,cAAc,CAAEC,iBAAiB,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CAAE;AAE1D;AACA,KAAM,CAAAiB,qBAAqB,CAAIC,CAAC,EAAK,CACjCF,iBAAiB,CAACG,QAAQ,CAAC,CAE3B;AACAC,QAAQ,CAACC,IAAI,CAACC,SAAS,CAAGH,QAAQ,CAAE;AAEpC;AACII,KAAK,CAAC,WAAW,CAAE,CACfC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CJ,IAAI,CAAEK,IAAI,CAACC,SAAS,CAAC,CAAGC,KAAK,CAAET,QAAS,CAAC,CAC7C,CAAC,CAAC,CACDU,IAAI,CAACC,GAAG,EAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CAACG,IAAI,EAAI,CACV,GAAIA,IAAI,CAACC,OAAO,CAAE,CACdC,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAC,CAC/C,CAAC,IAAM,CACHD,OAAO,CAACE,KAAK,CAAC,wCAAwC,CAAC,CAC3D,CACJ,CAAC,CAAC,CACDC,KAAK,CAACC,GAAG,EAAIJ,OAAO,CAACE,KAAK,CAAC,qCAAqC,CAAEE,GAAG,CAAC,CAAC,CAC5E;AACJ,CAAC,CAEDvC,SAAS,CAAC,IAAM,CACZwB,KAAK,CAAC,cAAc,CAAC,CACpBM,IAAI,CAACC,GAAG,EAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CAACG,IAAI,EAAItB,WAAW,CAACsB,IAAI,CAACvB,QAAQ,CAAC,CAAC,CACxC4B,KAAK,CAACC,GAAG,EAAIJ,OAAO,CAACE,KAAK,CAAC,qCAAqC,CAAEE,GAAG,CAAC,CAAC,CAE5E;AACA,KAAM,CAAAC,MAAM,CAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CAC/C,GAAIF,MAAM,CAAE,CACRhB,KAAK,CAAC,WAAW,CAAE,CACfC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CJ,IAAI,CAAEK,IAAI,CAACC,SAAS,CAAC,CAAEY,MAAO,CAAC,CACnC,CAAC,CAAC,CACDV,IAAI,CAACC,GAAG,EAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CAACG,IAAI,EAAI,CACV,GAAIA,IAAI,CAACC,OAAO,EAAID,IAAI,CAACJ,KAAK,CAAE,CAC5BZ,iBAAiB,CAACgB,IAAI,CAACJ,KAAK,CAAC,CAC7BR,QAAQ,CAACC,IAAI,CAACC,SAAS,CAAGU,IAAI,CAACJ,KAAK,CACxC,CACJ,CAAC,CAAC,CAEDS,KAAK,CAACC,GAAG,EAAIJ,OAAO,CAACE,KAAK,CAAC,iCAAiC,CAAEE,GAAG,CAAC,CAAC,CACxE,CACA,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAI,iBAAiB,CAAGA,CAACC,KAAK,CAAEC,KAAK,GAAK,CACxC9B,mBAAmB,CAAC+B,IAAI,GAAK,CACzB,GAAGA,IAAI,CACP,CAACF,KAAK,EAAGC,KACb,CAAC,CAAC,CAAC,CACP,CAAC,CAGD,KAAM,CAAAE,aAAa,CAAIH,KAAK,EAAK,CAC7B,KAAM,CAAAI,UAAU,CAAGlC,gBAAgB,CAAC8B,KAAK,CAAC,CAC1C,GAAI,CAACI,UAAU,CAAE,OAEjBxB,KAAK,CAAC,gBAAgB,CAAE,CACpBC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CAAC,CACDJ,IAAI,CAAEK,IAAI,CAACC,SAAS,CAAC,CAAEgB,KAAK,CAAEI,UAAW,CAAC,CAC9C,CAAC,CAAC,CACDlB,IAAI,CAACC,GAAG,EAAIA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACvBF,IAAI,CAACG,IAAI,EAAI,CACV,GAAIA,IAAI,CAACC,OAAO,CAAE,CACd,KAAM,CAAAe,eAAe,CAAG,CAAC,GAAGvC,QAAQ,CAAC,CACrCuC,eAAe,CAACL,KAAK,CAAC,CAAGI,UAAU,CACnCrC,WAAW,CAACsC,eAAe,CAAC,CAC5BpC,eAAe,CAAC,IAAI,CAAC,CACrBE,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAC3B,CAAC,IAAM,CACHoB,OAAO,CAACE,KAAK,CAAC,uBAAuB,CAAEJ,IAAI,CAACiB,OAAO,CAAC,CACxD,CACJ,CAAC,CAAC,CACDZ,KAAK,CAACC,GAAG,EAAIJ,OAAO,CAACE,KAAK,CAAC,4BAA4B,CAAEE,GAAG,CAAC,CAAC,CACnE,CAAC,CAED,mBACIjC,KAAA,QAAKiB,SAAS,CAAC,WAAW,CAAA4B,QAAA,eACtB/C,IAAA,QAAKmB,SAAS,CAAC,QAAQ,CAAA4B,QAAA,cACnB7C,KAAA,OAAA6C,QAAA,eACI/C,IAAA,SAAA+C,QAAA,CAAM,GAAC,CAAM,CAAC,cAAA/C,IAAA,SAAA+C,QAAA,CAAM,GAAC,CAAM,CAAC,cAAA/C,IAAA,SAAA+C,QAAA,CAAM,GAAC,CAAM,CAAC,cAAA/C,IAAA,SAAA+C,QAAA,CAAM,GAAC,CAAM,CAAC,cAAA/C,IAAA,SAAA+C,QAAA,CAAM,GAAC,CAAM,CAAC,EACtE,CAAC,CACJ,CAAC,cAEN/C,IAAA,OAAA+C,QAAA,CAAI,UAAQ,CAAI,CAAC,cAMjB7C,KAAA,WAAQ8C,EAAE,CAAC,cAAc,CAAC7B,SAAS,CAAC,cAAc,CAACsB,KAAK,CAAE7B,cAAe,CAACqC,QAAQ,CAAEnC,qBAAsB,CAAAiC,QAAA,eACtG/C,IAAA,WAAQyC,KAAK,CAAC,UAAU,CAAAM,QAAA,CAAC,WAAM,CAAQ,CAAC,cACxC/C,IAAA,WAAQyC,KAAK,CAAC,MAAM,CAAAM,QAAA,CAAC,QAAM,CAAQ,CAAC,EAChC,CAAC,cAET/C,IAAA,OAAA+C,QAAA,CAAI,YAAU,CAAI,CAAC,cACnB/C,IAAA,OAAA+C,QAAA,CACKzC,QAAQ,CAAC4C,GAAG,CAAC,CAACC,CAAC,CAAEX,KAAK,gBACnBtC,KAAA,OAAA6C,QAAA,EACKvC,YAAY,GAAKgC,KAAK,cACnBtC,KAAA,CAAAE,SAAA,EAAA2C,QAAA,eACI/C,IAAA,UACIoD,IAAI,CAAC,MAAM,CACXC,YAAY,CAAEF,CAAE,CAChBF,QAAQ,CAAGlC,CAAC,EAAKwB,iBAAiB,CAACC,KAAK,CAAEzB,CAAC,CAACuC,MAAM,CAACb,KAAK,CAAE,CAE7D,CAAC,cAEFzC,IAAA,WACImB,SAAS,CAAC,eAAe,CACzBoC,OAAO,CAAEA,CAAA,GAAMZ,aAAa,CAACH,KAAK,CAAE,CAAAO,QAAA,CAAC,cAAE,CAAQ,CAAC,cACpD/C,IAAA,WACImB,SAAS,CAAC,eAAe,CACzBoC,OAAO,CAAEA,CAAA,GAAM9C,eAAe,CAAC,IAAI,CAAE,CAAAsC,QAAA,CAAC,QAAC,CAAQ,CAAC,EAEtD,CAAC,cAEH7C,KAAA,CAAAE,SAAA,EAAA2C,QAAA,EACKI,CAAC,cACFnD,IAAA,WACImB,SAAS,CAAC,eAAe,CACzBoC,OAAO,CAAEA,CAAA,GAAM9C,eAAe,CAAC+B,KAAK,CAAE,CAAAO,QAAA,CAAC,cAAE,CAAQ,CAAC,EACxD,CACL,CACCP,KAAK,CAAGlC,QAAQ,CAACkD,MAAM,CAAG,CAAC,eAAIxD,IAAA,OAAImB,SAAS,CAAC,aAAa,CAAE,CAAC,GA1B1DqB,KA2BL,CAEP,CAAC,CACF,CAAC,cAELxC,IAAA,CAACF,IAAI,EAAC2D,EAAE,CAAC,GAAG,CAAAV,QAAA,cACR/C,IAAA,WAAQoD,IAAI,CAAC,QAAQ,CAACjC,SAAS,CAAC,eAAe,CAAA4B,QAAA,CAAC,iBAAY,CAAQ,CAAC,CACnE,CAAC,cAEP/C,IAAA,MAAGmB,SAAS,CAAC,QAAQ,CAAA4B,QAAA,CAAC,0SAEtB,CAAG,CAAC,EACH,CAAC,CAEd,CAEA,cAAe,CAAA1C,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}